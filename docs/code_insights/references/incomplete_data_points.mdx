# Incomplete data points

There are a few cases when a Code Insight may return incomplete data.

In all of these cases, if data is returned at all, it will be an undercount.

See the below situations for tips on avoiding and troubleshooting these errors.

## Timeout errors

For searches that take a long time to complete, it's possible for them to timeout before the search ends, and before we can record the data value.

To address this, try to minimize or avoid cases where your insight data series:

1. Runs over extra large sets of repositories (scope your insight further to fewer repositories)
1. Uses many boolean combinations (consider splitting into multiple data series)
1. Runs a complex search over an especially large monorepo (consider optimizing your search query to be more specific or include more filters, like `lang:` or `file:`)

In addition:

1. Timeout errors on points that have been backfilled before the creation date of the insight are more likely to occur on single, large repositories, because backfill points are calculated by running many searches, repository by repository, individually.
1. Timeout errors on points that have been snapshot after the creation date of the insight are more likely to occur on insights running complex searches over large numbers of repositories, because snapshot points are calculated by running a single global search against the current index.
You can read more about this case in our [limitations](/code_insights/explanations/current_limitations_of_code_insights#accuracy-considerations-for-an-insight-query-returning-a-large-result-set).

If the data is available, the error alert will inform you which times the search has timed out.

## Strategies for very large repositories

When dealing with large repositories, several strategies can help identify and manage search limitations effectively.

The goal is to find a query that can execute successfully, and then ramp up complexity until we find the breaking point.

### Use Code Search to test your query

You can use Code Search to test the query against a particular timestamp in a given repository.

Since Code Insights computes data points for twelve datapoints in the give time range,
you must add a commit in the past to the `repo` parameter to achieve comparable results.

For example the Code Insights query `file:.*\.md hello repo:^github\.com/my_org/my_repo` should be written as
`context:global file:.*\.md hello repo:^github\.com/my_org/my_repo$@my_commit_sha` in Code Search.

If the query fails with a timeout before one minute has passed, add the parameter `timeout:1m`.

Once a query was executed the results may be indexed and you need to choose a different commit sha to achieve comparable results to Code Insights.

### Precise queries compute faster

If your query is not able to compute results in a reasonable time, you can try to reduce the number of results returned by the query.

For example, if you want to track the version of a NPM dependency in your code base, searching for `my_library file:package.json` will compute much faster because there are less files to look at and fewer results to return.

We recommend to make your query as precise as possible (and even omit results that may be relevant) until you reach a query that is able to compute fast enough.

To learn more about writing precise queries, see our [search query syntax](/code-search/queries).

### Increase the timeout

By default, search queries have a one minute timeout. This value is capped by the setting `search.limits.maxTimeoutSeconds` which by default is also one minute.

Your site admin can change this value to increase the maximum timeout. Once it is increased, you can use the search parameter `timeout:` to give the query more time to run.

Example:

```
timeout:10m
```

Note that very long searches can have a negative impact on performance, so it's important to use this parameter with caution.

## Other errors

For other errors, please reach out to our support team through your usual channels or at support@sourcegraph.com.
