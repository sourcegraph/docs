# Upgrading to Postgres 16

Starting with Sourcegraph 5.10, the minimum required version of Postgres will be updated to Postgres 16. This change is necessary as Postgres 12 (our previous minimum version) reaches end of life.

## Overview

- **Current minimum version**: Postgres 12
- **New minimum version**: Postgres 16
- **Effective dates**:
  - Version 5.10 (November 25, 2024): Built-in Postgres images updated to version 16
  - Version 5.12 (January 15, 2025): Postgres 16 becomes mandatory minimum version

## Impact assessment

The upgrade impact depends on your database deployment model:

### Built-in databases

If you use Sourcegraph's built-in Postgres images:

- Extended downtime during first upgrade to 5.10 or later
- Downtime duration: ~2.5 hours per TB of indexed code (minimum 15 minutes)
- One-time downtime only; subsequent upgrades unaffected
- **Action required**: Plan for extended maintenance window

### External databases

If you use externally managed databases (e.g., AWS RDS, Google CloudSQL):

- Manual upgrade to Postgres 16 required
- Must complete upgrade before moving to Sourcegraph 5.12 or later
- **Action required**: Coordinate database upgrade with your database administrators

## Required actions

1. **For built-in databases**:
   - Schedule maintenance window for 5.10+ upgrade
   - Create database backup before upgrade
   - Coordinate with your Sourcegraph account team

2. **For external databases**:
   - Upgrade to Postgres 16 before January 15, 2025
   - Follow your organization's database upgrade procedures
   - Contact Sourcegraph support if assistance needed

## FAQ

### Q: Is upgrading to latest Sourcegraph mandatory by the deadline dates?
No, but staying current is recommended for latest features and fixes.

### Q: What happens if no action is taken?
Running end-of-life Postgres versions means no security updates or bug fixes from Postgres.

### Q: How to estimate downtime for built-in Postgres?
Calculate approximately 2.5 hours per TB of indexed code. Example: 100GB = ~15 minutes downtime.

### Q: Can external database upgrades be done independently?
Yes, Postgres upgrades for external databases can be performed independently of Sourcegraph upgrades.

## Support

Contact your Sourcegraph account team or support for assistance with planning your upgrade.
