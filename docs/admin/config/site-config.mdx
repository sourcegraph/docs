# Site configuration

Site configuration defines how various Sourcegraph features behave. See the [full reference](#reference) below for a comprehensive list of site configuration options.

## Configuration overview

[Go here](/admin/) for an overview of configuring Sourcegraph.

## View and edit site configuration

Site admins can view and edit site configuration on a Sourcegraph instance:

1. Go to **User menu > Site admin**.
1. Open the **Configuration** page. (The URL is `https://sourcegraph.example.com/site-admin/configuration`.)

## Reference

All site configuration options and their default values are shown below.

### admin/config/site.schema.json

{/* SCHEMA_SYNC_START: admin/config/site.schema.json */}
{/* WARNING: This section is auto-generated during releases. Do not edit manually. */}
{/* Last updated: 2026-01-30T23:58:58Z */}
```json
{

	//////////////////////////////////////////////////////////////
	// General Configuration
	//////////////////////////////////////////////////////////////

	// Prompts user to install new browser for non es5
	"RedirectUnsupportedBrowser": false,

	// Enable/Disable attribution search for Cody-generated snippets
	"attribution.enabled": false,

	// Use this gateway parameters for customers that bring their own key. Otherwise gateway endpoint is used.
	"attribution.gateway": {
		"accessToken": null,
		"endpoint": null
	},

	// Hide Cody-generated snippets that have attribution matches ("enforced"), or show the snippet but passively inform the user about attribution ("permissive", the default). Requires attribution.enabled = true.
	// Valid options: "permissive", "enforced"
	"attribution.mode": "permissive",

	// Automatically delete branches created for Batch Changes changesets when the changeset is merged or closed, for supported code hosts. Overrides any setting on the repository on the code host itself.
	"batchChanges.autoDeleteBranch": false,

	// How long changesets will be retained after they have been detached from a batch change.
	// Other example values:
	// - "336h"
	// - "48h"
	// - "5h30m40s"
	"batchChanges.changesetsRetention": null,

	// A list of permitted container registries for use in batch changes, e.g., docker.io. If empty, all container registries are allowed. It cannot be used together with 'batchChanges.containerRegistryDenylist'
	// Other example values:
	// - "docker.io"
	// - "artifactory.acme.com"
	"batchChanges.containerRegistryAllowlist": null,

	// A list of forbidden container registries for use in batch changes, e.g., docker.io. If empty, all container registries are allowed. It cannot be used together with 'batchChanges.containerRegistryAllowlist'
	// Other example values:
	// - "docker.io"
	// - "artifactory.acme.com"
	"batchChanges.containerRegistryDenylist": null,

	// Hides Batch Changes warnings about webhooks not being configured.
	"batchChanges.disableWebhooksWarning": false,

	// Enables/disables the Batch Changes feature.
	"batchChanges.enabled": true,

	// When enabled, all branches created by batch changes will be pushed to forks of the original repository.
	"batchChanges.enforceForks": false,

	// Reject unverified commits when creating a Batch Change
	"batchChanges.rejectUnverifiedCommit": false,

	// When enabled, only site admins can create and apply batch changes.
	"batchChanges.restrictToAdmins": false,

	// Specifies specific windows, which can have associated rate limits, to be used when reconciling published changesets (creating or updating). All days and times are handled in UTC.
	// Other example values:
	// - {
	//     "days": [
	//       "saturday",
	//       "sunday"
	//     ],
	//     "end": "20:00",
	//     "rate": "10/hour",
	//     "start": "06:00"
	//   }
	"batchChanges.rolloutWindows": null,

	// Maximum number of batch spec templates to display in the template library UI. Default is 20.
	"batchChanges.templateLibrary.displayLimit": 20,

	// Whether auto-indexing policies may apply to all repositories on the Sourcegraph instance. Default is false. The policyRepositoryMatchLimit setting still applies to such auto-indexing policies.
	"codeIntelAutoIndexing.allowGlobalPolicies": false,

	// Enables/disables the code intel auto-indexing feature. Currently experimental.
	"codeIntelAutoIndexing.enabled": false,

	// Overrides the default Docker images used by auto-indexing.
	// Other example values:
	// - {
	//     "go": "sourcegraph/lsif-go:latest",
	//     "java": "sourcegraph/lsif-java:latest"
	//   }
	"codeIntelAutoIndexing.indexerMap": null,

	// Enables/disables the auto-indexing policy management UI in the code graph configuration pages.
	"codeIntelAutoIndexing.policyManagementEnabled": false,

	// The maximum number of repositories to which a single auto-indexing policy can apply. Default is -1, which is unlimited.
	"codeIntelAutoIndexing.policyRepositoryMatchLimit": -1,

	// Configuration options for code monitors
	"codeMonitors": {
		"concurrency": 4,
		"maxRuntime": 1,
		"pollInterval": "5m"
	},

	// Rules defining the repositories that will never be shared by Cody with third-party LLM providers.
	"cody.contextFilters": {
		"exclude": null,
		"include": null
	},

	// Enable or disable Cody instance-wide. When Cody is disabled, all Cody endpoints and GraphQL queries will return errors, Cody will not show up in the site-admin sidebar, and Cody in the global navbar will only show a call-to-action for site-admins to enable Cody.
	"cody.enabled": false,

	// Whether to enable Cody role-based access controls. See https://sourcegraph.com/docs/admin/access_control
	"cody.permissions": true,

	// ⚠️  DEPRECATED: DEPRECATED: Use cody.permissions instead
	// DEPRECATED: Use cody.permissions instead
	"cody.restrictUsersFeatureFlag": false,

	// Configuration for the completions service.
	// Other example values:
	// - {
	//     "chat": true
	//   }
	"configFeatures": {
		"autoComplete": false,
		"chat": false,
		"chatVision": false,
		"commands": false
	},

	// Enables the computation of contributor statistics per author and repository. Will all commits of each repository initially, and then work on deltas.
	// Other example values:
	// - true
	"contributorsDataEnabled": true,

	// Required when using any of the native code host integrations for Phabricator, GitLab, or Bitbucket Server. It is a space-separated list of allowed origins for cross-origin HTTP requests which should be the base URL for your Phabricator, GitLab, or Bitbucket Server instance.
	// Other example values:
	// - "https://my-phabricator.example.com https://my-bitbucket.example.com https://my-gitlab.example.com"
	"corsOrigin": null,

	// (debug) controls the amount of symbol search parallelism. Defaults to 20. It is not recommended to change this outside of debugging scenarios. This option will be removed in a future version.
	// Other example values:
	// - 20
	"debug.search.symbolsParallelism": 0,

	// The rate limit (in requests per hour) for the default rate limiter in the rate limiters registry. By default this is disabled and the default rate limit is infinity.
	"defaultRateLimit": -1,

	// Disable periodic syncs of configured code host connections (repository metadata, permissions, batch changes changesets, etc)
	"disableAutoCodeHostSyncs": false,

	// Disable periodically fetching git contents for existing repositories.
	"disableAutoGitUpdates": false,

	// Disable fetching changelog posts from the external Sourcegraph changelog API. Useful for airgapped environments.
	"disableChangelog": false,

	// Disable the feedback survey
	"disableFeedbackSurvey": false,

	// ⚠️  DEPRECATED: DEPRECATED: This setting has no effect
	// DEPRECATED: This setting has no effect
	"disableNonCriticalTelemetry": false,

	// ⚠️  DEPRECATED: DEPRECATED: This setting has no effect
	// DEPRECATED: This setting has no effect
	// Other example values:
	// - true
	"disablePublicRepoRedirects": false,

	// Configuration options for Sourcegraph.com only.
	"dotcom": {
		"sams.clientID": null,
		"sams.clientSecret": null,
		"sams.server": null,
		"srcCliVersionCache": {
			"enabled": false,
			"github": {
				"repository": {
					"name": "src-cli",
					"owner": "sourcegraph"
				},
				"token": null,
				"uri": "https://github.com",
				"webhookSecret": null
			},
			"interval": "1h"
		}
	},

	// The "from" address for emails sent by this server.
	// Please see https://sourcegraph.com/docs/admin/config/email
	// Other example values:
	// - "noreply@sourcegraph.example.com"
	"email.address": null,

	// The name to use in the "from" address for emails sent by this server.
	// Other example values:
	// - "Our Company Sourcegraph"
	// - "Example Inc Sourcegraph"
	"email.senderName": "Sourcegraph",

	// The SMTP server used to send transactional emails.
	// Please see https://sourcegraph.com/docs/admin/config/email
	// Other example values:
	// - {
	//     "authentication": "PLAIN",
	//     "host": "smtp.example.com",
	//     "password": "mypassword",
	//     "port": 465,
	//     "username": "alice"
	//   }
	"email.smtp": null,

	// Configurable templates for some email types sent by Sourcegraph.
	// Other example values:
	// - {
	//     "resetPassword": {
	//       "body": "To reset your password on {{.Host}}, please click the link below:\n\n{{.URL}}\n\nIf you did not request a password reset, please ignore this email. Your password will not change until you click the link and set a new password.",
	//       "subject": "Reset your password on {{.Host}}"
	//     },
	//     "setPassword": {
	//       "body": "To set your password on {{.Host}} and complete your account registration, please click the link below:\n\n{{.URL}}\n\nYour username is: {{.Username}}\n\nIf you did not sign up for an account on {{.Host}}, please ignore this email.",
	//       "subject": "Set your password on {{.Host}}"
	//     }
	//   }
	"email.templates": {
		"resetPassword": null,
		"setPassword": null
	},

	// Experimental features and settings.
	"experimentalFeatures": {
		"batchChanges.enableForkNameSuffix": false,
		"batchChanges.enablePerforce": false,
		"codeintelSyntacticIndexing.enabled": false,
		"cody.auditLog": {
			"enabled": false
		},
		"codyContextIgnore": false,
		"commitGraphUpdates": {
			"defaultBranchOnly": null
		},
		"crossRepoSyntacticCodeNav": false,
		"customGitFetch": null,
		"debug.log": {
			"extsvc.gitlab": false
		},
		"deepSearch.enabled": false,
		"deepSearch.model": "anthropic::2024-10-22::claude-sonnet-4-latest",
		"deepSearch.sharing.enabled": false,
		"enableGithubInternalRepoVisibility": false,
		"enablePermissionsWebhooks": false,
		"enableStorm": false,
		"eventLogging": "enabled",
		"gitServerPinnedRepos": null,
		"goPackages": "disabled",
		"insightsAlternateLoadingStrategy": false,
		"insightsBackfillerV2": true,
		"insightsDataRetention": true,
		"jvmPackages": "disabled",
		"languageDetection": {
			"graphQL": "useFileContents"
		},
		"npmPackages": "disabled",
		"pagure": "disabled",
		"passwordPolicy": {
			"enabled": true,
			"minimumLength": 12,
			"numberOfSpecialCharacters": 2,
			"requireAtLeastOneNumber": true,
			"requireUpperandLowerCase": true
		},
		"perforceChangelistMapping": "enabled",
		"preciseCodeNavFlow": "v2",
		"pythonPackages": "disabled",
		"ranking": {
			"flushWallTimeMS": 500,
			"maxQueueMatchCount": -1,
			"maxQueueSizeBytes": -1,
			"maxReorderDurationMS": 0,
			"maxReorderQueueSize": 24,
			"repoScores": {}
		},
		"rateLimitAnonymous": 500,
		"rubyPackages": "disabled",
		"rustPackages": "disabled",
		"scipBasedAPIs": true,
		"search.index.branches": null,
		"search.index.query.contexts": false,
		"search.index.revisions": null,
		"search.sanitization": {
			"orgName": null,
			"sanitizePatterns": null
		},
		"searchJobs": false,
		"structuralSearch": "disabled",
		"subRepoPermissions": {
			"allowCodeInsights": false,
			"enabled": false,
			"enforceIPRestrictions": false,
			"ipParseCacheSize": 1000,
			"redactInaccessibleCommits": false,
			"rulesInterpretationMode": "unified",
			"userCacheSize": 1000,
			"userCacheTTLSeconds": 10
		},
		"tls.external": {
			"certificates": null,
			"insecureSkipVerify": false
		}
	},

	// The externally accessible URL for Sourcegraph (i.e., what you type into your browser). Previously called `appURL`. Only root URLs are allowed.
	// Other example values:
	// - "https://sourcegraph.example.com"
	"externalURL": null,

	// HTML to inject at the bottom of the `<body>` element on each page, for analytics scripts. Requires env var ENABLE_INJECT_HTML=true.
	"htmlBodyBottom": null,

	// HTML to inject at the top of the `<body>` element on each page, for analytics scripts. Requires env var ENABLE_INJECT_HTML=true.
	"htmlBodyTop": null,

	// HTML to inject at the bottom of the `<head>` element on each page, for analytics scripts. Requires env var ENABLE_INJECT_HTML=true.
	"htmlHeadBottom": null,

	// HTML to inject at the top of the `<head>` element on each page, for analytics scripts. Requires env var ENABLE_INJECT_HTML=true.
	"htmlHeadTop": null,

	// The size of the buffer for aggregations ran in-memory. A higher limit might strain memory for the frontend
	"insights.aggregations.bufferSize": 500,

	// The maximum number of results a proactive search aggregation can accept before stopping
	"insights.aggregations.proactiveResultLimit": 50000,

	// Set the number of seconds an insight series will spend backfilling before being interrupted. Series are interrupted to prevent long running insights from exhausting all of the available workers. Interrupted series will be placed back in the queue and retried based on their priority.
	"insights.backfill.interruptAfter": 60,

	// Number of repositories within the batch to backfill concurrently.
	"insights.backfill.repositoryConcurrency": 3,

	// Set the number of repositories to batch in a group during backfilling.
	"insights.backfill.repositoryGroupSize": 10,

	// Maximum number of historical Code Insights data frames that may be analyzed per second.
	// Other example values:
	// - 50
	// - 0.5
	"insights.historical.worker.rateLimit": 20,

	// The allowed burst rate for the Code Insights historical worker rate limiter.
	// Other example values:
	// - 10
	// - 20
	"insights.historical.worker.rateLimitBurst": 20,

	// The maximum number of data points that will be available to view for a series on a code insight. Points beyond that will be stored in a separate table and available for data export.
	// Other example values:
	// - 12
	// - 24
	// - 50
	"insights.maximumSampleSize": 30,

	// Number of concurrent executions of a code insight query on a worker node
	// Other example values:
	// - 10
	"insights.query.worker.concurrency": 1,

	// Maximum number of Code Insights queries initiated per second on a worker node.
	// Other example values:
	// - 10
	// - 0.5
	"insights.query.worker.rateLimit": 20,

	// The allowed burst rate for the Code Insights queries per second rate limiter.
	// Other example values:
	// - 10
	// - 20
	"insights.query.worker.rateLimitBurst": 20,

	// Settings for repository language stats inventory
	// Other example values:
	// - {
	//     "disableEnhancedLanguageDetection": false,
	//     "gitServerConcurrency": 4,
	//     "maxInventoryInMemory": 1000,
	//     "redisConcurrency": 20,
	//     "timeoutInMinutes": 5
	//   }
	"inventory": {
		"disableEnhancedLanguageDetection": false,
		"gitServerConcurrency": 4,
		"maxInventoryInMemory": 1000,
		"redisConcurrency": 20,
		"timeoutInMinutes": 5
	},

	// The license key associated with a Sourcegraph product subscription, which is necessary to activate Sourcegraph Enterprise functionality. To obtain this value, contact Sourcegraph to purchase a subscription. To escape the value into a JSON string, you may want to use a tool like https://json-escape-text.now.sh.
	"licenseKey": null,

	// Whether or not LSIF uploads will be blocked unless a valid LSIF upload token is provided.
	"lsifEnforceAuth": false,

	// ⚠️  DEPRECATED: DEPRECATED: Configure maxRepos in search.limits
	// DEPRECATED: Configure maxRepos in search.limits
	"maxReposToSearch": -1,

	"modelConfiguration": null,

	// Notifications received from Sourcegraph.com to display in Sourcegraph.
	// Other example values:
	// - {
	//     "key": "2023-03-10-my-key",
	//     "message": "This is a test notification message."
	//   }
	"notifications": null,

	// Configuration for organization invitations.
	// Other example values:
	// - {
	//     "expiryTime": 48,
	//     "signingKey": "your-signing-key"
	//   }
	"organizationInvitations": {
		"expiryTime": 48,
		"signingKey": null
	},

	// The maximum number of outbound requests to retain. This is a global limit across all outbound requests. If the limit is exceeded, older items will be deleted. If the limit is 0, no outbound requests are logged.
	"outboundRequestLogLimit": 50,

	// The max number of concurrent Own jobs that will run per worker node.
	"own.background.repoIndexConcurrencyLimit": 5,

	// The maximum per second burst of repositories for Own jobs per worker node. Generally this value should not be less than the max concurrency.
	"own.background.repoIndexRateBurstLimit": 5,

	// The maximum per second rate of repositories for Own jobs per worker node.
	"own.background.repoIndexRateLimit": 20,

	// The Own service will attempt to match a Team by the last part of its handle if it contains a slash and no match is found for its full handle.
	"own.bestEffortTeamMatching": true,

	// URL to fetch unreachable repository details from. Defaults to "https://sourcegraph.com"
	// Other example values:
	// - {
	//     "url": "https://sourcegraph.example.com"
	//   }
	"parentSourcegraph": {
		"url": "https://sourcegraph.com"
	},

	// Time interval (in seconds) of how often cleanup worker should remove old jobs from permissions sync jobs table.
	"permissions.syncJobCleanupInterval": 3600,

	// The number of last repo/user permission jobs to keep for history. Will be cleaned up occasionally to only keep the most recent N jobs.
	"permissions.syncJobsHistorySize": 5,

	// Number of repo permissions to schedule for syncing in single scheduler iteration.
	"permissions.syncOldestRepos": 100,

	// Number of user permissions to schedule for syncing in single scheduler iteration.
	"permissions.syncOldestUsers": 100,

	// Don't sync a repo's permissions if it has synced within the last n seconds.
	"permissions.syncReposBackoffSeconds": 900,

	// The maximum number of repo-centric permissions syncing jobs that can be spawned concurrently. Service restart is required to take effect for changes.
	"permissions.syncReposMaxConcurrency": 5,

	// Time interval (in seconds) of how often each component picks up authorization changes in external services.
	"permissions.syncScheduleInterval": 60,

	// Don't sync a user's permissions if they have synced within the last n seconds.
	"permissions.syncUsersBackoffSeconds": 900,

	// The maximum number of user-centric permissions syncing jobs that can be spawned concurrently. Service restart is required to take effect for changes.
	"permissions.syncUsersMaxConcurrency": 5,

	// Settings for Sourcegraph explicit permissions, which allow the site admin to explicitly manage repository permissions via the GraphQL API. This will mark repositories as restricted by default.
	// Other example values:
	// - {
	//     "bindID": "email"
	//   }
	// - {
	//     "bindID": "username"
	//   }
	"permissions.userMapping": {
		"bindID": "email",
		"enabled": true
	},

	"rateLimits": {
		"graphQLMaxAliases": 500,
		"graphQLMaxDepth": 30,
		"graphQLMaxDuplicateFieldCount": 500,
		"graphQLMaxFieldCount": 500000,
		"graphQLMaxUniqueFieldCount": 500
	},

	// Enables redacting sensitive information from outbound requests. Important: We only respect this setting in development environments. In production, we always redact outbound requests.
	// Other example values:
	// - true
	"redactOutboundRequestHeaders": false,

	// The number of concurrent external service syncers that can run.
	"repoConcurrentExternalServiceSyncers": 3,

	// Interval (in minutes) for checking code hosts (such as GitHub, Gitolite, etc.) for new repositories.
	"repoListUpdateInterval": 1,

	// Configuration for repository purge worker.
	"repoPurgeWorker": {
		"deletedTTLMinutes": 60,
		"intervalMinutes": 15
	},

	// The SCIM auth token is used to authenticate SCIM requests. If not set, SCIM is disabled.
	"scim.authToken": "",

	// Identity provider used for SCIM support.  "STANDARD" should be used unless a more specific value is available
	// Valid options: "STANDARD", "Azure AD"
	"scim.identityProvider": "STANDARD",

	// The number of threads each indexserver should use to index shards. If not set, indexserver will use the number of available CPUs. This is exposed as a safeguard and should usually not require being set.
	// Other example values:
	// - 10
	"search.index.shardConcurrency": 0,

	// Whether indexed symbol search is enabled. This is contingent on the indexed search configuration, and is true by default for instances with indexed search enabled. Enabling this will cause every repository to re-index, which is a time consuming (several hours) operation. Additionally, it requires more storage and ram to accommodate the added symbols information in the search index.
	// Other example values:
	// - true
	"search.index.symbols.enabled": false,

	// A list of file glob patterns where matching files will be indexed and searched regardless of their size. Files still need to be valid utf-8 to be indexed. The glob pattern syntax can be found here: https://github.com/bmatcuk/doublestar#patterns.
	// Other example values:
	// - [
	//     "go.sum",
	//     "package-lock.json",
	//     "**/*.thrift"
	//   ]
	"search.largeFiles": null,

	// Limits that search applies for number of repositories searched and timeouts.
	// Other example values:
	// - {
	//     "commitDiffMaxRepos": 50,
	//     "commitDiffWithTimeFilterMaxRepos": 5000,
	//     "maxRepos": 200,
	//     "maxTimeoutSeconds": 60
	//   }
	"search.limits": {
		"commitDiffMaxRepos": 50,
		"commitDiffWithTimeFilterMaxRepos": 10000,
		"maxRepos": -1,
		"maxTimeoutSeconds": 60
	},

	// Syntax highlighting configuration
	// Other example values:
	// - {
	//     "engine": {
	//       "default": "tree-sitter",
	//       "overrides": {
	//         "go": "syntect"
	//       }
	//     },
	//     "languages": {
	//       "extensions": {
	//         "go": "go",
	//         "ts": "typescript"
	//       },
	//       "patterns": [
	//         {
	//           "language": "cobol",
	//           "match": "cobol_.*\\.txt"
	//         }
	//       ]
	//     }
	//   }
	"syntaxHighlighting": {
		"engine": {
			"default": null,
			"overrides": null
		},
		"languages": {
			"extensions": null,
			"patterns": null
		},
		"symbols": {
			"engine": null
		}
	},

	// Configuration for application user telemetry.
	"telemetry": {
		"disableLocalEventLogs": false
	},

	"tls.external": null,

	// The channel on which to automatically check for Sourcegraph updates.
	// Valid options: "release", "none"
	// Other example values:
	// - "none"
	"update.channel": "release",

	// Configuration for logging incoming webhooks.
	// Other example values:
	// - {
	//     "enabled": true,
	//     "retention": "7d"
	//   }
	"webhook.logging": {
		"enabled": false,
		"retention": "72h"
	},


	//////////////////////////////////////////////////////////////
	// Authentication & Authorization
	//////////////////////////////////////////////////////////////

	// The config options for access requests
	// Other example values:
	// - {
	//     "enabled": true
	//   }
	// - {
	//     "enabled": false
	//   }
	"auth.accessRequest": {
		"enabled": true
	},

	// Settings for access tokens, which enable external tools to access the Sourcegraph API with the privileges of the user.
	// Other example values:
	// - {
	//     "allow": "site-admin-create",
	//     "allowNoExpiration": true,
	//     "defaultExpirationDays": 90,
	//     "expirationOptionDays": [
	//       7,
	//       14,
	//       30,
	//       60,
	//       90
	//     ]
	//   }
	// - {
	//     "allow": "none",
	//     "allowNoExpiration": false,
	//     "defaultExpirationDays": 45,
	//     "expirationOptionDays": [
	//       7,
	//       14,
	//       30,
	//       60,
	//       90
	//     ]
	//   }
	"auth.accessTokens": {
		"allow": "all-users-create",
		"allowNoExpiration": false,
		"defaultExpirationDays": 90,
		"expirationOptionDays": [
			7,
			14,
			30,
			60,
			90
		]
	},

	// IP allowlist for access to the Sourcegraph instance. If set, only requests from these IP addresses will be allowed. By default client IP is inferred connected client IP address, and you may configure to use a request header to determine the user IP.
	"auth.allowedIpAddress": {
		"clientIpAddress": null,
		"enabled": false,
		"errorMessageTemplate": "Access from your IP address is not allowed.",
		"trustedClientIpAddress": null,
		"userIpAddress": null,
		"userIpRequestHeaders": null
	},

	// Enables users to change their username after account creation. Warning: setting this to be true has security implications if you have enabled (or will at any point in the future enable) repository permissions with an option that relies on username equivalency between Sourcegraph and an external service or authentication provider. Do NOT set this to true if you are using non-built-in authentication OR rely on username equivalency for repository permissions.
	"auth.enableUsernameChanges": false,

	// Enables OAuth 2.0 Dynamic Client Registration (RFC 7591) for the Sourcegraph identity provider. When enabled, OAuth clients can self-register programmatically instead of requiring manual pre-configuration. Required for MCP clients and other applications that use dynamic registration for authorization.
	"auth.idpDynamicClientRegistrationEnabled": true,

	// The config options for account lockout
	// Other example values:
	// - {
	//     "consecutivePeriod": 300,
	//     "failedAttemptThreshold": 3,
	//     "lockoutPeriod": 600
	//   }
	"auth.lockout": {
		"consecutivePeriod": 3600,
		"failedAttemptThreshold": 5,
		"lockoutPeriod": 1800
	},

	// The maximum duration a user session may be idle (not making any requests), after which it expires and the user is required to re-authenticate. Must be at least 1 hour. Defaults to no idle expiry.
	// Other example values:
	// - "2h"
	"auth.maxSessionIdleDuration": "0",

	// The minimum number of Unicode code points that a password must contain.
	"auth.minPasswordLength": 12,

	// Enables and configures password policy. This will allow admins to enforce password complexity and length requirements.
	// Other example values:
	// - {
	//     "enabled": true,
	//     "numberOfSpecialCharacters": 1,
	//     "requireAtLeastOneNumber": true,
	//     "requireUpperandLowerCase": true
	//   }
	"auth.passwordPolicy": {
		"enabled": false,
		"numberOfSpecialCharacters": 0,
		"requireAtLeastOneNumber": true,
		"requireUpperandLowerCase": true
	},

	// The duration (in seconds) that a password reset link is considered valid.
	"auth.passwordResetLinkExpiry": 14400,

	// The number of auth providers that will be shown to the user on the login screen. Other providers are shown under `Other login methods` section.
	"auth.primaryLoginProvidersCount": 3,

	// The authentication providers to use for identifying and signing in users. See instructions below for configuring SAML, OpenID Connect (including Google Workspace), and HTTP authentication proxies. Multiple authentication providers are supported (by specifying multiple elements in this array).
	"auth.providers": [
		{
			"allowSignup": true,
			"type": "builtin"
		}
	],

	// The maximum duration of a user session, after which it expires and the user is required to re-authenticate. The default is 90 days. Must be at least 1 hour. There is typically no need to set this, but some users may have specific internal security requirements.
	// The string format is that of the Duration type in the Go time package (https://golang.org/pkg/time/#ParseDuration). E.g., "720h", "43200m", "2592000s" all indicate a time span of 30 days.
	// Other example values:
	// - "168h"
	"auth.sessionExpiry": "2160h",

	// Validity expressed in minutes of the unlock account token
	"auth.unlockAccountLinkExpiry": 5,

	// Base64-encoded HMAC signing key to sign the JWT token for account unlock URLs
	// Other example values:
	// - "LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0KYjNCbGJuTnphQzFyWlhrdGRqRUFBQUFBQkc1dmJtVUFBQUFFYm05dVpRQUFBQUFBQUFBQkFBQUJGZ0FBQUhVQkFBQQ"
	"auth.unlockAccountLinkSigningKey": null,

	// Ensure that matching users are members of the specified orgs (auto-joining users to the orgs if they are not already a member). Provide a JSON object of the form `{"*": ["org1", "org2"]}`, where org1 and org2 are orgs that all users are automatically joined to. Currently the only supported key is `"*"`.
	// Other example values:
	// - {
	//     "*": [
	//       "org1"
	//     ]
	//   }
	"auth.userOrgMap": null,

	// When true, site admins will only be able to see private code they have access to via our authz system.
	"authz.enforceForSiteAdmins": false,


	//////////////////////////////////////////////////////////////
	// Security & Encryption
	//////////////////////////////////////////////////////////////

	// Configuration for encryption keys used to encrypt data at rest in the database.
	// Other example values:
	// - {
	//     "externalServiceKey": {
	//       "filePath": "/path/to/external_service.key",
	//       "type": "mounted"
	//     }
	//   }
	// - {
	//     "userExternalAccountKey": {
	//       "keyname": "projects/my-project/locations/global/keyRings/my-keyring/cryptoKeys/my-key",
	//       "type": "cloudkms"
	//     }
	//   }
	"encryption.keys": {
		"batchChangesCredentialKey": null,
		"cacheSize": 2048,
		"enableCache": false,
		"executorSecretKey": null,
		"externalServiceKey": null,
		"gitHubAppKey": null,
		"outboundWebhookKey": null,
		"slackConfigurationKey": null,
		"userExternalAccountKey": null,
		"webhookKey": null,
		"webhookLogKey": null
	},


	//////////////////////////////////////////////////////////////
	// AI & Completions
	//////////////////////////////////////////////////////////////

	// Configuration for the completions service.
	// Other example values:
	// - {
	//     "accessToken": "abc123",
	//     "chatModel": "chat",
	//     "completionModel": "code-completion",
	//     "perUserDailyLimit": 100,
	//     "provider": "openai"
	//   }
	"completions": {
		"accessToken": null,
		"azureChatModel": null,
		"azureCompletionModel": null,
		"azureUseDeprecatedCompletionsAPIForOldModels": true,
		"chatModel": null,
		"chatModelMaxTokens": 0,
		"completionModel": null,
		"completionModelMaxTokens": 0,
		"disableClientConfigAPI": false,
		"enabled": true,
		"endpoint": null,
		"fastChatModel": null,
		"fastChatModelMaxTokens": 0,
		"model": null,
		"perUserCodeCompletionsDailyLimit": 0,
		"perUserDailyLimit": 0,
		"provider": "sourcegraph",
		"smartContextWindow": "enabled",
		"user": null
	},


	//////////////////////////////////////////////////////////////
	// Executors
	//////////////////////////////////////////////////////////////

	// The shared secret between Sourcegraph and executors. The value must contain at least 20 characters.
	// Other example values:
	// - "my-super-secret-access-token"
	"executors.accessToken": null,

	// The image to use for batch changes in executors when using native execution. Use this value to pull from a custom image registry.
	"executors.batcheshelperImage": "sourcegraph/batcheshelper",

	// The tag to use for the batcheshelper image in executors when using native execution. Use this value to use a custom tag. Sourcegraph by default uses the best match, so use this setting only if you really need to overwrite it and make sure to keep it updated.
	// Other example values:
	// - "4.1.0"
	"executors.batcheshelperImageTag": null,

	// The URL where Sourcegraph executors can reach the Sourcegraph instance. If not set, defaults to externalURL. URLs with a path (other than `/`) are not allowed. For Docker executors, the special hostname `host.docker.internal` can be used to refer to the Docker container's host.
	// Other example values:
	// - "https://sourcegraph.example.com"
	"executors.frontendURL": null,

	// The tag to use for the lsif-go image in executors. Use this value to use a custom tag. Sourcegraph by default uses the best match, so use this setting only if you really need to overwrite it and make sure to keep it updated.
	// Other example values:
	// - "sourcegraph/lsif-go"
	"executors.lsifGoImage": null,

	// The configuration for multiqueue executors.
	"executors.multiqueue": {
		"dequeueCacheConfig": {
			"batches": {
				"limit": 50,
				"weight": 4
			},
			"codeintel": {
				"limit": 250,
				"weight": 1
			}
		}
	},

	// The image to use for src-cli in executors. Use this value to pull from a custom image registry.
	"executors.srcCLIImage": "sourcegraph/src-cli",

	// The tag to use for the src-cli image in executors. Use this value to use a custom tag. Sourcegraph by default uses the best match, so use this setting only if you really need to overwrite it and make sure to keep it updated.
	// Other example values:
	// - "4.1.0"
	"executors.srcCLIImageTag": null,


	//////////////////////////////////////////////////////////////
	// Git & Repository Management
	//////////////////////////////////////////////////////////////

	// Whether clone progress should be logged to a file. If enabled, logs are written to files in the OS default path for temporary files.
	"cloneProgress.log": false,

	// JSON array of configuration that maps from Git clone URL to repository name. Sourcegraph automatically resolves remote clone URLs to their proper code host. However, there may be non-remote clone URLs (e.g., in submodule declarations) that Sourcegraph cannot automatically map to a code host. In this case, use this field to specify the mapping. The mappings are tried in the order they are specified and take precedence over automatic mappings.
	// Other example values:
	// - [
	//     {
	//       "from": "^../(?P\u003cname\u003e\\w+)$",
	//       "to": "github.com/user/{name}"
	//     }
	//   ]
	"git.cloneURLToRepositoryName": null,

	// ⚠️  DEPRECATED: DEPRECATED: Use the GitHub Apps site admin page
	// DEPRECATED: Use the GitHub Apps site admin page
	// Other example values:
	// - {
	//     "appID": "1234",
	//     "clientID": "client-id",
	//     "clientSecret": "client-secret",
	//     "privateKey": "base64-encoded-private-key",
	//     "slug": "sourcegraph"
	//   }
	"gitHubApp": {
		"appID": null,
		"clientID": null,
		"clientSecret": null,
		"privateKey": null,
		"slug": null
	},

	// Maximum number of seconds that a long Git command (e.g. clone or remote update) is allowed to execute. The default is 7200 seconds, or 2 hours.
	"gitLongCommandTimeout": 7200,

	// Maximum number of remote code host git operations (e.g. clone or ls-remote) to be run per second per gitserver. Default is -1, which is unlimited.
	"gitMaxCodehostRequestsPerSecond": -1,

	// Maximum number of git clone processes that will be run concurrently per gitserver to update repositories. <= 0 means disabled.
	"gitMaxConcurrentCleanups": 5,

	// Maximum number of git clone processes that will be run concurrently per gitserver to update repositories. Note: the global git update scheduler respects gitMaxConcurrentClones. However, we allow each gitserver to run up to gitMaxConcurrentClones to allow for urgent fetches. Urgent fetches are used when a user is browsing a PR and we do not have the commit yet.
	"gitMaxConcurrentClones": 5,

	// Record git operations that are executed on configured repositories.
	// Other example values:
	// - {
	//     "ignoredGitCommands": [
	//       "show",
	//       "rev-parse",
	//       "log",
	//       "diff",
	//       "ls-tree"
	//     ],
	//     "repos": [
	//       "github.com/sourcegraph/sourcegraph",
	//       "github.com/gorilla/mux"
	//     ],
	//     "size": 1000
	//   }
	"gitRecorder": {
		"ignoredGitCommands": [
			"show",
			"rev-parse",
			"log",
			"diff",
			"ls-tree"
		],
		"repos": null,
		"size": 10000
	},

	// ⚠️  DEPRECATED: DEPRECATED: As of 5.10, Sourcegraph relies on user traffic, webhooks, and heuristics
	// DEPRECATED: As of 5.10, Sourcegraph relies on user traffic, webhooks, and heuristics
	// Other example values:
	// - [
	//     {
	//       "interval": 5,
	//       "pattern": "^github.com/sourcegraph/.*"
	//     },
	//     {
	//       "interval": 10,
	//       "pattern": "^bitbucket.org/.*"
	//     }
	//   ]
	"gitUpdateInterval": null,

	// Disk usage threshold at which to display warning notification. Value is a percentage.
	"gitserver.diskUsageWarningThreshold": 90,


	//////////////////////////////////////////////////////////////
	// Branding & UI
	//////////////////////////////////////////////////////////////

	// Customize Sourcegraph homepage logo and search icon.
	// Other example values:
	// - {
	//     "dark": {
	//       "logo": "https://example.com/logo_dark.png",
	//       "symbol": "https://example.com/search_symbol_dark_24x24.png"
	//     },
	//     "favicon": "https://example.com/favicon.ico",
	//     "light": {
	//       "logo": "https://example.com/logo_light.png",
	//       "symbol": "https://example.com/search_symbol_light_24x24.png"
	//     }
	//   }
	"branding": {
		"brandName": "Sourcegraph",
		"dark": null,
		"disableSymbolSpin": false,
		"favicon": null,
		"light": null
	},


	//////////////////////////////////////////////////////////////
	// Observability & Monitoring
	//////////////////////////////////////////////////////////////

	// Configuration for logging and alerting, including to external services.
	"log": {
		"auditLog": {
			"gitserverAccess": false,
			"graphQL": false,
			"internalTraffic": false,
			"severityLevel": null
		},
		"sentry": {
			"backendDSN": null,
			"codeIntelDSN": null,
			"dsn": null
		}
	},

	// Configure notifications for Sourcegraph's built-in alerts.
	// Other example values:
	// - [
	//     {
	//       "level": "critical",
	//       "notifier": {
	//         "channel": "#alerts",
	//         "type": "slack",
	//         "url": "https://hooks.slack.com/services/..."
	//       }
	//     },
	//     {
	//       "level": "warning",
	//       "notifier": {
	//         "addresses": [
	//           "alerts@example.com"
	//         ],
	//         "type": "email"
	//       }
	//     }
	//   ]
	"observability.alerts": null,

	// (debug) Set a limit to the amount of captured slow GraphQL requests being stored for visualization. For defining the threshold for a slow GraphQL request, see observability.logSlowGraphQLRequests.
	// Other example values:
	// - 2000
	"observability.captureSlowGraphQLRequestsLimit": 0,

	// EXPERIMENTAL: Configuration for client observability
	// Other example values:
	// - {
	//     "openTelemetry": {
	//       "endpoint": "/-/debug/otlp"
	//     }
	//   }
	// - {
	//     "openTelemetry": {
	//       "endpoint": "https://opentelemetry.example.com"
	//     }
	//   }
	"observability.client": {
		"openTelemetry": {
			"endpoint": "/-/debug/otlp",
			"webVitalsInstrumentation": false
		}
	},

	// (debug) logs all GraphQL requests slower than the specified number of milliseconds.
	// Other example values:
	// - 10000
	"observability.logSlowGraphQLRequests": 0,

	// (debug) logs all search queries (issued by users, code intelligence, or API requests) slower than the specified number of milliseconds.
	// Other example values:
	// - 10000
	"observability.logSlowSearches": 0,

	// Silence individual Sourcegraph alerts by identifier.
	// Other example values:
	// - [
	//     "warning_gitserver_disk_space_remaining"
	//   ]
	// - [
	//     "critical_frontend_down",
	//     "warning_high_load"
	//   ]
	"observability.silenceAlerts": null,

	// Configures distributed tracing within Sourcegraph. To learn more, refer to https://sourcegraph.com/docs/admin/observability/tracing
	// Other example values:
	// - {
	//     "sampling": "selective",
	//     "type": "opentelemetry",
	//     "urlTemplate": "https://ui.honeycomb.io/$ORG/environments/$DATASET/trace?trace_id={{ .TraceID }}"
	//   }
	// - {
	//     "sampling": "all",
	//     "type": "opentelemetry",
	//     "urlTemplate": "{{ .ExternalURL }}/-/debug/jaeger/trace/{{ .TraceID }}"
	//   }
	"observability.tracing": {
		"debug": false,
		"sampling": "selective",
		"type": "opentelemetry",
		"urlTemplate": null
	}
}
```
{/* SCHEMA_SYNC_END: admin/config/site.schema.json */}

#### Known bugs

The following site configuration options require the server to be restarted for the changes to take effect:

```
auth.providers
externalURL
insights.query.worker.concurrency
insights.commit.indexer.interval
permissions.syncUsersMaxConcurrency
```

## Editing your site configuration if you cannot access the web UI

If you are having trouble accessing the web UI, you can make edits to your site configuration by editing the configuration directly.

### Sourcegraph with Docker Compose and single-server Sourcegraph with Docker

Set `FRONTEND_CONTAINER` to:

-   [Docker Compose](/self-hosted/deploy/docker-compose/): the `sourcegraph-frontend` container

```sh
docker exec -it --user=root $FRONTEND_CONTAINER sh -c 'apk add --no-cache && nano /home/sourcegraph/site-config.json'
```

Or if you prefer using a Vim editor:

```sh
docker exec -it $FRONTEND_CONTAINER sh -c 'vi ~/site-config.json'
```

### Sourcegraph with Kubernetes

For [Kubernetes](/self-hosted/deploy/kubernetes/) deployments:

```sh
kubectl exec -it $FRONTEND_POD -- sh -c 'apk add --no-cache nano && nano ~/site-config.json'
```

Or if you prefer using a Vim editor:

```sh
kubectl exec -it $FRONTEND_POD -- sh -c 'vi ~/site-config.json'
```

Then simply save your changes (type <kbd>ctrl+x</kbd> and <kbd>y</kbd> to exit `nano` and save your changes). Your changes will be applied immediately in the same way as if you had made them through the web UI.

## If you are still encountering issues

You can check the container logs to see if you have made any typos or mistakes in editing the configuration file. If you are still encountering problems, you can save the default site configuration that comes with Sourcegraph (below) or contact support@sourcegraph.com with any questions you have.

```json
{
	// The externally accessible URL for Sourcegraph (i.e., what you type into your browser)
	// This is required to be configured for Sourcegraph to work correctly.
	// "externalURL": "https://sourcegraph.example.com",

	// The authentication provider to use for identifying and signing in users.
	// Only one entry is supported.
	//
	// The builtin auth provider with signup disallowed (shown below) means that
	// after the initial site admin signs in, all other users must be invited.
	//
	// Other providers are documented at https://sourcegraph.com/docs/admin/auth.
	"auth.providers": [
		{
			"type": "builtin",
			"allowSignup": false
		}
	]
}
```

## Accessing global settings

Global settings should rarely need to be accessed. You will need to direct database access to change this setting.

To find the current global settings, use the following SQL query:

```sql
SELECT * FROM settings WHERE user_id IS null and org_id IS null ORDER BY id DESC;
```

This will return a history of all global settings changes, the highest id being the latest
Next, you can update the `content` column to either `{}` to reset global settings or to the desired JSON object.

```sql
UPDATE settings SET content = '{}' WHERE id IS <id>;
```
